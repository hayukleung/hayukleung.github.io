<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>SQLite编译指令PRAGMA | xThinker | Android相关</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="database">
  <meta name="description" content="原文地址
SQLite支持的编译指令(pragma)PRAGMA命令是用于修改SQlite库或查询SQLite库内部数据(non-table)的特殊命令。PRAGMA 命令使用与其它SQLite命令(e.g. SELECT, INSERT)相同的接口，但在如下重要方面与其它命令不同:•    在未来的SQLite版本中部分pragma可能被删除或添加，小心使用。•    当使用未知的pragma语">
<meta property="og:type" content="article">
<meta property="og:title" content="SQLite编译指令PRAGMA">
<meta property="og:url" content="https://hayukleung.github.io/2012/09/09/SQLite编译指令PRAGMA/index.html">
<meta property="og:site_name" content="xThinker">
<meta property="og:description" content="原文地址
SQLite支持的编译指令(pragma)PRAGMA命令是用于修改SQlite库或查询SQLite库内部数据(non-table)的特殊命令。PRAGMA 命令使用与其它SQLite命令(e.g. SELECT, INSERT)相同的接口，但在如下重要方面与其它命令不同:•    在未来的SQLite版本中部分pragma可能被删除或添加，小心使用。•    当使用未知的pragma语">
<meta property="og:updated_time" content="2016-04-08T13:51:58.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SQLite编译指令PRAGMA">
<meta name="twitter:description" content="原文地址
SQLite支持的编译指令(pragma)PRAGMA命令是用于修改SQlite库或查询SQLite库内部数据(non-table)的特殊命令。PRAGMA 命令使用与其它SQLite命令(e.g. SELECT, INSERT)相同的接口，但在如下重要方面与其它命令不同:•    在未来的SQLite版本中部分pragma可能被删除或添加，小心使用。•    当使用未知的pragma语">
  
    <link rel="alternative" href="/atom.xml" title="xThinker" type="application/atom+xml">
  
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="loading" class="active"></div>

  <nav id="menu" class="hide" >
   <div class="inner">
  <a href="javascript:;" class="header-icon waves-circle-light" id="menu-off">
      <i class="icon icon-lg icon-close"></i>
  </a>
  <div class="brand-wrap">
    <div class="brand">
      <a href="/" class="avatar"><img src="/img/avatar.png"></a>
      <hgroup class="introduce">
        <h5 class="nickname">Hayuk Leung</h5>
        <a href="mailto:undefined" title="hayukleung@gmail.com" class="mail">hayukleung@gmail.com</a>
      </hgroup>
    </div>
  </div>
  <ul class="nav">
    
        <li class="waves-block">
          <a href="/"  >
            <i class="icon icon-lg icon-home"></i>
            Home
          </a>
        </li>
    
        <li class="waves-block">
          <a href="/archives"  >
            <i class="icon icon-lg icon-archives"></i>
            Archives
          </a>
        </li>
    
        <li class="waves-block">
          <a href="/tags"  >
            <i class="icon icon-lg icon-tags"></i>
            Category
          </a>
        </li>
    
        <li class="waves-block">
          <a href="/tags/android"  >
            <i class="icon icon-lg icon-android"></i>
            Android
          </a>
        </li>
    
        <li class="waves-block">
          <a href="https://github.com/hayukleung" target="_blank" >
            <i class="icon icon-lg icon-github"></i>
            Github
          </a>
        </li>
    
        <li class="waves-block">
          <a href="http://www.weibo.com/liangxiaxu" target="_blank" >
            <i class="icon icon-lg icon-weibo"></i>
            Weibo
          </a>
        </li>
    
        <li class="waves-block">
          <a href="http://hayukleung.duapp.com" target="_blank" >
            <i class="icon icon-lg icon-link"></i>
            WordPress
          </a>
        </li>
    
  </ul>

  <footer class="footer">
  <p><a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0;vertical-align:middle;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAMAAABEF7i9AAAAllBMVEUAAAD///+rsapERER3d3eIiIjMzMzu7u4iIiKUmZO6v7rKzsoODg4RERFVVVUNDQ0NDg0PEA8zMzNLTEtbXltmZmZydnF9gn2AgICPkI+ZmZmqqqq7u7vFxsXIzMgNDQwZGRkgICAhISEkJSMnKCcuMC4xMzE5Ozk7PTtBQkFCQkJDQ0Nna2eGhoaHh4ezuLLGysbd3d1wVGpAAAAA4UlEQVR42q2T1xqCMAyFk7QsBQeKA9x7j/d/OSm22CpX0nzcpA1/T05aAOuBVkMAScQFHLnEwoCo2f1TnQIGoVMewjZEjVFN4GH1Ue1Cn2jWqwfsOOj6wDwGvotsl/c8lv7KIq1eLOsT0HMFHMIE/RZyHnlphryT9zyV+8WH5e8yQw3wnQvgAFxPTKUVi555SHR/lOfLMgVTeDlSfN+TaoUsiTyeIm+bCkHvCA2FUKG48LDtYBZBknsYP/G8NTw0gaaHyuQf4H5pecrB/FYCT2sL9zAfy1Xyjou6L8X2W7YcLyBZCRtnq/zfAAAAAElFTkSuQmCC" /></a></p>
  <p>xThinker &copy; 2016</p>
  <p>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme
  <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></p>
  <a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-2x icon-rss-square"></i></a>
</footer>

</div>

  </nav>
  <main id="main">
    <header class="header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-circle-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">SQLite编译指令PRAGMA</div>
        
        <a href="javascript:;" class="header-icon waves-circle-light" id="menu-share">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header">
  <div class="container">
    <h1 class="author">SQLite编译指令PRAGMA</h1>
    <h5 class="subtitle">2012-09-09</h5>
  </div>
</header>

    <div class="container body-wrap">
      
  <article id="post-SQLite编译指令PRAGMA" class="article article-type-post" itemscope itemprop="blogPost">
    
      <div class="post-meat flex-row">
        <div class="flex-col">
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/database/">database</a></li></ul>
</div>
      </div>
      <div class="post-body">

        <aside class="post-widget" id="post-widget">

          
          <div class="post-share" id="post-share" data-title="SQLite编译指令PRAGMA" data-pic="/img/avatar.png" data-summary="梁夏旭的个人博客" data-url="https://hayukleung.github.io/2012/09/09/SQLite编译指令PRAGMA/index.html">
    <div class="tit">分享到：</div>
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" href="javascript:;" data-title="微博" data-service="tsina">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns" href="javascript:;" data-title="微信" data-service="weixin">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" href="javascript:;" data-title=" QQ" data-service="cqq">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" href="javascript:;" data-title=" Facebook" data-service="fb">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" href="javascript:;" data-title=" Twitter" data-service="twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="douban share-sns" href="javascript:;" data-title="豆瓣" data-service="douban">
          豆
        </a>
      </li>
    </ul>
 </div>

          

          
          <nav class="post-toc-wrap" id="post-toc">
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#SQLite支持的编译指令-pragma"><span class="post-toc-text">SQLite支持的编译指令(pragma)</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#•-用于调试库和校验数据库文件。"><span class="post-toc-text">•    用于调试库和校验数据库文件。 </span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#使用整数值value的pragma也可以使用符号表示，字符串”on”-，”true”-，和”yes”-等同于1，”off”-，”false”和”no”等同于0。这些字符串大小写不敏感且无须进行引用。无法识别的字符串被当作1且不会报错。value返回时是整数。"><span class="post-toc-text">使用整数值value的pragma也可以使用符号表示，字符串”on” ，”true” ，和”yes” 等同于1，”off” ，”false”和”no”等同于0。这些字符串大小写不敏感且无须进行引用。无法识别的字符串被当作1且不会报错。value返回时是整数。</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#用于修改SQLite库的操作的pragma"><span class="post-toc-text">用于修改SQLite库的操作的pragma</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-auto-vacuum"><span class="post-toc-text">PRAGMA auto_vacuum;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-cache-size"><span class="post-toc-text">PRAGMA cache_size;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-case-sensitive-like"><span class="post-toc-text">PRAGMA case_sensitive_like;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-count-changes"><span class="post-toc-text">PRAGMA count_changes;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-default-cache-size"><span class="post-toc-text">PRAGMA default_cache_size;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-default-synchronous"><span class="post-toc-text">PRAGMA default_synchronous;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-empty-result-callbacks"><span class="post-toc-text">PRAGMA empty_result_callbacks;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-encoding"><span class="post-toc-text">PRAGMA encoding;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-full-column-names"><span class="post-toc-text">PRAGMA full_column_names;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-fullfsync"><span class="post-toc-text">PRAGMA fullfsync;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-page-size"><span class="post-toc-text">PRAGMA page_size;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-read-uncommitted"><span class="post-toc-text">PRAGMA read_uncommitted;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-short-column-names"><span class="post-toc-text">PRAGMA short_column_names;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-synchronous"><span class="post-toc-text">PRAGMA synchronous;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-temp-store"><span class="post-toc-text">PRAGMA temp_store;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-temp-store-directory"><span class="post-toc-text">PRAGMA temp_store_directory;</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#用于查询数据库的schema的pragma"><span class="post-toc-text">用于查询数据库的schema的pragma</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-database-list"><span class="post-toc-text">PRAGMA database_list;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-foreign-key-list-table-name"><span class="post-toc-text">PRAGMA foreign_key_list(table-name);</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-index-info-index-name"><span class="post-toc-text">PRAGMA index_info(index-name);</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-index-list-table-name"><span class="post-toc-text">PRAGMA index_list(table-name);</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-table-info-table-name"><span class="post-toc-text">PRAGMA table_info(table-name);</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#用于查询-更改版本信息的pragma"><span class="post-toc-text">用于查询/更改版本信息的pragma</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-database-schema-version"><span class="post-toc-text">PRAGMA [database.]schema_version;</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#用于库debug的pragma"><span class="post-toc-text">用于库debug的pragma</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-integrity-check"><span class="post-toc-text">PRAGMA integrity_check;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-parser-trace-ON-1-amp-amp-PRAGMA-parser-trace-OFF-0"><span class="post-toc-text">PRAGMA parser_trace = ON; (1) && PRAGMA parser_trace = OFF; (0)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-vdbe-trace-ON-1-amp-amp-PRAGMA-vdbe-trace-OFF-0"><span class="post-toc-text">PRAGMA vdbe_trace = ON; (1) && PRAGMA vdbe_trace = OFF; (0)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#PRAGMA-vdbe-listing-ON-1-amp-amp-PRAGMA-vdbe-listing-OFF-0"><span class="post-toc-text">PRAGMA vdbe_listing = ON; (1) && PRAGMA vdbe_listing = OFF; (0)</span></a></li></ol></li></ol>
          </nav>
          
        </aside>

        <div class="post-main">

            <div class="post-content" itemprop="postContent"><p><a href="http://www.cnblogs.com/liangxiaxu/archive/2012/09/09/2677361.html" target="_blank" rel="external">原文地址</a></p>
<h2 id="SQLite支持的编译指令-pragma"><a href="#SQLite支持的编译指令-pragma" class="headerlink" title="SQLite支持的编译指令(pragma)"></a>SQLite支持的编译指令(pragma)</h2><p>PRAGMA命令是用于修改SQlite库或查询SQLite库内部数据(non-table)的特殊命令。PRAGMA 命令使用与其它SQLite命令(e.g. SELECT, INSERT)相同的接口，但在如下重要方面与其它命令不同:<br>•    在未来的SQLite版本中部分pragma可能被删除或添加，小心使用。<br>•    当使用未知的pragma语句时不产生报错。未知的pragma仅仅会被忽略，即是说若是打错了pragma语句SQLite不会提示用户。<br>•    一些pragma在SQL编译阶段生效而非执行阶段。即是说若使用C语言的sqlite3_compile(), sqlite3_step(), sqlite3_finalize() API (或类似的封装接口中)，pragma可能在调用sqlite3_compile()期间起作用。<br>•    pragma命令不与其它SQL引擎兼容。<br>可用的pragma命令有如下四个基本类型：<br>•    用于察看当前数据库的模式。<br>•    用于修改SQLite库的操作或查询当前的操作模式。<br>•    用于查询或修改两个数据库的版本号，schema-version和user-version. </p>
<h1 id="•-用于调试库和校验数据库文件。"><a href="#•-用于调试库和校验数据库文件。" class="headerlink" title="•    用于调试库和校验数据库文件。 "></a>•    用于调试库和校验数据库文件。 </h1><p>PRAGMA命令语法<br>sql-statement::=PRAGMA name [= value] | PRAGMA function(arg) </p>
<h1 id="使用整数值value的pragma也可以使用符号表示，字符串”on”-，”true”-，和”yes”-等同于1，”off”-，”false”和”no”等同于0。这些字符串大小写不敏感且无须进行引用。无法识别的字符串被当作1且不会报错。value返回时是整数。"><a href="#使用整数值value的pragma也可以使用符号表示，字符串”on”-，”true”-，和”yes”-等同于1，”off”-，”false”和”no”等同于0。这些字符串大小写不敏感且无须进行引用。无法识别的字符串被当作1且不会报错。value返回时是整数。" class="headerlink" title="使用整数值value的pragma也可以使用符号表示，字符串”on” ，”true” ，和”yes” 等同于1，”off” ，”false”和”no”等同于0。这些字符串大小写不敏感且无须进行引用。无法识别的字符串被当作1且不会报错。value返回时是整数。"></a>使用整数值value的pragma也可以使用符号表示，字符串”on” ，”true” ，和”yes” 等同于1，”off” ，”false”和”no”等同于0。这些字符串大小写不敏感且无须进行引用。无法识别的字符串被当作1且不会报错。value返回时是整数。</h1><h2 id="用于修改SQLite库的操作的pragma"><a href="#用于修改SQLite库的操作的pragma" class="headerlink" title="用于修改SQLite库的操作的pragma"></a>用于修改SQLite库的操作的pragma</h2><h3 id="PRAGMA-auto-vacuum"><a href="#PRAGMA-auto-vacuum" class="headerlink" title="PRAGMA auto_vacuum;"></a>PRAGMA auto_vacuum;</h3><p>PRAGMA auto_vacuum = 0 | 1;<br>查询或设置数据库的auto-vacuum标记。<br>正常情况下，当提交一个从数据库中删除数据的事务时，数据库文件不改变大小。未使用的文件页被标记并在以后的添加操作中再次使用。这种情况下使用VACUUM命令释放删除得到的空间。<br>当开启auto-vacuum，当提交一个从数据库中删除数据的事务时，数据库文件自动收缩， (VACUUM命令在auto-vacuum开启的数据库中不起作用)。数据库会在内部存储一些信息以便支持这一功能，这使得 数据库文件比不开启该选项时稍微大一些。<br>只有在数据库中未建任何表时才能改变auto-vacuum标记。试图在已有表的情况下修改不会导致报错。 </p>
<h3 id="PRAGMA-cache-size"><a href="#PRAGMA-cache-size" class="headerlink" title="PRAGMA cache_size;"></a>PRAGMA cache_size;</h3><p>PRAGMA cache_size = Number-of-pages;<br>查询或修改SQLite一次存储在内存中的数据库文件页数。每页使用约1.5K内存，缺省的缓存大小是2000。若需要使用改变大量多行的UPDATE或DELETE命令，并且不介意SQLite使用更多的内存的话，可以增大缓存以提高性能。<br>当使用pragma cache_size改变缓存大小时，改变仅对当前对话有效，当数据库关闭重新打开时缓存大小恢复到缺省大小。要想永久改变缓存大小，使用pragma default_cache_size = Number-of-pages; </p>
<h3 id="PRAGMA-case-sensitive-like"><a href="#PRAGMA-case-sensitive-like" class="headerlink" title="PRAGMA case_sensitive_like;"></a>PRAGMA case_sensitive_like;</h3><p>PRAGMA case_sensitive_like = 0 | 1;<br>LIKE运算符的缺省行为是忽略latin1字符的大小写。因此在缺省情况下’a’ LIKE ‘A’的值为真。可以通过打开 case_sensitive_like pragma来改变这一缺省行为。当启用case_sensitive_like，’a’ LIKE ‘A’为假而 ‘a’ LIKE ‘a’依然为真。</p>
<h3 id="PRAGMA-count-changes"><a href="#PRAGMA-count-changes" class="headerlink" title="PRAGMA count_changes;"></a>PRAGMA count_changes;</h3><p>PRAGMA count_changes = 0 | 1;<br>查询或更改count-changes标记。正常情况下INSERT, UPDATE和DELETE语句不返回数据。 当开启count-changes，以上语句返回一行含一个整数值的数据——该语句插入，修改或删除的行数。 返回的行数不包括由触发器产生的插入，修改或删除等改变的行数。</p>
<h3 id="PRAGMA-default-cache-size"><a href="#PRAGMA-default-cache-size" class="headerlink" title="PRAGMA default_cache_size;"></a>PRAGMA default_cache_size;</h3><p>PRAGMA default_cache_size = Number-of-pages;<br>查询或修改SQLite一次存储在内存中的数据库文件页数。每页使用约1.5K内存，它与cache_sizepragma类似，只是它永久性地改变缓存大小。 利用该pragma，你可以设定一次缓存大小，并且每次重新打开数据库时都继续使用该值。</p>
<h3 id="PRAGMA-default-synchronous"><a href="#PRAGMA-default-synchronous" class="headerlink" title="PRAGMA default_synchronous;"></a>PRAGMA default_synchronous;</h3><p>该语句在2.8版本中可用，但在3.0版中被去掉了。这条pragma很危险且不推荐使用，安全起见在该文档中不涉及此pragma的用法。</p>
<h3 id="PRAGMA-empty-result-callbacks"><a href="#PRAGMA-empty-result-callbacks" class="headerlink" title="PRAGMA empty_result_callbacks;"></a>PRAGMA empty_result_callbacks;</h3><p>PRAGMA empty_result_callbacks = 0 | 1;<br>查询或更改empty-result-callbacks标记。<br>empty-result-callbacks标记仅仅影响sqlite3_exec API函数。正常情况下，empty-result-callbacks标记清空， 则对返回0行数据的命令不调用sqlite3_exec()的回叫函数，当设置了empty-result-callbacks，则调用回叫 函数一次，置第三个参数为0 (NULL).这使得使用sqlite3_exec() API的程序即使在一条查询不返回数据时依然检索字段名。</p>
<h3 id="PRAGMA-encoding"><a href="#PRAGMA-encoding" class="headerlink" title="PRAGMA encoding;"></a>PRAGMA encoding;</h3><p>PRAGMA encoding = “UTF-8”;<br>PRAGMA encoding = “UTF-16”;<br>PRAGMA encoding = “UTF-16le”;<br>PRAGMA encoding = “UTF-16be”;<br>在第一种形式中，若主数据库已创建，这条pragma返回主数据库使用得文本编码格式，为 “UTF-8”, “UTF-16le” (little-endian UTF-16 encoding) 或者”UTF-16be” (big-endian UTF-16 encoding)中的一种。 若主数据库未创建，返回值为当前会话创建的主数据库将要使用的文本编码格式。<br>第二种及以后几种形式只在主数据库未创建时有效。这时该pragma设置当前会话创建的主数据库将要使用的文本编码格式。 “UTF-16”表示”使用本机字节顺序的UTF-16编码”。若这些形式在主数据库创建后使用，将被忽略且不产生任何效果。<br>数据库的编码格式设置后不能够被改变。<br>ATTACH命令创建的数据库使用与主数据库相同的编码格式。</p>
<h3 id="PRAGMA-full-column-names"><a href="#PRAGMA-full-column-names" class="headerlink" title="PRAGMA full_column_names;"></a>PRAGMA full_column_names;</h3><p>PRAGMA full_column<em>names = 0 | 1;<br>查询或更改the full-column-names标记。该标记影响SQLite命名SELECT语句(当字段表达式为表-字段或通配符”*”时) 返回的字段名的方式。正常情况下，当SELECT语句将两个或多个表连接时，这类结果字段的返回名为__</em>，当SELECT语句查询一个单独的表时， 返回字段名为<strong><em>。当设置了full-column-names标记，返回的字段名将统一为</em></strong>不管是否对表进行了连接。<br>若short-column-names和full-column-names标记同时被设置，则使用full-column-names方式。</p>
<h3 id="PRAGMA-fullfsync"><a href="#PRAGMA-fullfsync" class="headerlink" title="PRAGMA fullfsync;"></a>PRAGMA fullfsync;</h3><p>PRAGMA fullfsync = 0 | 1;<br>查询或更改fullfsync标记。该标记决定是否在支持的系统上使用F_FULLFSYNC同步模式。缺省值为off.截至目前(2006-02-10) 只有Mac OS X 系统支持F_FULLFSYNC.</p>
<h3 id="PRAGMA-page-size"><a href="#PRAGMA-page-size" class="headerlink" title="PRAGMA page_size;"></a>PRAGMA page_size;</h3><p>PRAGMA page_size = bytes;<br>查询或设置page-size值。只有在未创建数据库时才能设置page-size。页面大小必须是2的整数倍且大于等于512小于等于8192。 上限可以通过在编译时修改宏定义SQLITE_MAX_PAGE_SIZE的值来改变。上限的上限是32768.</p>
<h3 id="PRAGMA-read-uncommitted"><a href="#PRAGMA-read-uncommitted" class="headerlink" title="PRAGMA read_uncommitted;"></a>PRAGMA read_uncommitted;</h3><p>PRAGMA read_uncommitted = 0 | 1;<br>查询，设置或清除READ UNCOMMITTED isolation(读取未授权的分隔符).缺省的SQLite分隔符等级是SERIALIZABLE. 任何线程或进程可选用READ UNCOMMITTED isolation,但除了共享公共页和schema缓存的连接之间以外的地方也会 使用SERIALIZABLE.缓存共享通过sqlite3_enable_shared_cache() API开启，且只在运行同一线程的连接间有效。缺省情况下缓存共享是关闭的。</p>
<h3 id="PRAGMA-short-column-names"><a href="#PRAGMA-short-column-names" class="headerlink" title="PRAGMA short_column_names;"></a>PRAGMA short_column_names;</h3><p>PRAGMA short_column_names = 0 | 1;<br>查询或更改the short-column-names标记。该标记影响SQLite命名SELECT语句(当字段表达式为表-字段或通配符”*”时) 返回的字段名的方式。正常情况下，当SELECT语句将两个或多个表连接时， 这类结果字段的返回名为 ，当SELECT语句查询一个单独的表时， 返回字段名为。当设置了full-column-names标记，返回的字段名将统一为 不管是否对表进行了连接。<br>若short-column-names和full-column-names标记同时被设置，则使用full-column-names方式。</p>
<h3 id="PRAGMA-synchronous"><a href="#PRAGMA-synchronous" class="headerlink" title="PRAGMA synchronous;"></a>PRAGMA synchronous;</h3><p>PRAGMA synchronous = FULL; (2)<br>PRAGMA synchronous = NORMAL; (1)<br>PRAGMA synchronous = OFF; (0)<br>查询或更改”synchronous”标记的设定。第一种形式(查询)返回整数值。 当synchronous设置为FULL (2), SQLite数据库引擎在紧急时刻会暂停以确定数据已经写入磁盘。 这使系统崩溃或电源出问题时能确保数据库在重起后不会损坏。FULL synchronous很安全但很慢。 当synchronous设置为NORMAL, SQLite数据库引擎在大部分紧急时刻会暂停，但不像FULL模式下那么频繁。 NORMAL模式下有很小的几率(但不是不存在)发生电源故障导致数据库损坏的情况。但实际上，在这种情况 下很可能你的硬盘已经不能使用，或者发生了其他的不可恢复的硬件错误。 设置为synchronous OFF (0)时，SQLite在传递数据给系统以后直接继续而不暂停。若运行SQLite的应用程序崩溃， 数据不会损伤，但在系统崩溃或写入数据时意外断电的情况下数据库可能会损坏。另一方面，在synchronous OFF时，一些操作可能会快50倍甚至更多。<br>在SQLite 2中，缺省值为NORMAL.而在3中修改为FULL.</p>
<h3 id="PRAGMA-temp-store"><a href="#PRAGMA-temp-store" class="headerlink" title="PRAGMA temp_store;"></a>PRAGMA temp_store;</h3><p>PRAGMA temp_store = DEFAULT; (0)<br>PRAGMA temp_store = FILE; (1)<br>PRAGMA temp_store = MEMORY; (2)<br>查询或更改”temp_store”参数的设置。当temp_store设置为DEFAULT (0),使用编译时的C预处理宏 TEMP_STORE来定义储存临时表和临时索引的位置。当设置为MEMORY (2)临时表和索引存放于内存中。 当设置为FILE (1)则存放于文件中。temp_store_directory pragma 可用于指定存放该文件的目录。当改变temp_store设置，所有已存在的临时表，索引，触发器及视图将被立即删除。<br>库中的编译时C预处理标志TEMP_STORE可以覆盖该pragma设置。下面的表给出TEMP_STORE预处理宏和 temp_store pragma交互作用的总结：<br>|TEMP_STORE|PRAGMA temp_store|临时表和索引使用的存储方式|<br>|:-|:–|:–|<br>|0 |any|文件|<br>|1 |0  |文件|<br>|1 |1  |文件|<br>|1 |2  |内存|<br>|2 |0  |内存|<br>|2 |1  |文件|<br>|2 |2  |内存|<br>|3 |any|内存|</p>
<h3 id="PRAGMA-temp-store-directory"><a href="#PRAGMA-temp-store-directory" class="headerlink" title="PRAGMA temp_store_directory;"></a>PRAGMA temp_store_directory;</h3><p>PRAGMA temp_store_directory = ‘directory-name’;<br>查询或更改”temp_store_directory”设置——存储临时表和索引的文件所在的目录。 仅在当前连接有效，在建立新连接时重置为缺省值。<br>当改变了temp_store_directory设置，所有已有的临时表，索引，触发器，视图会被直接删除。 建议在数据库一打开时就设置好temp_store_directory.<br>directory-name需用单引号引起来。要想恢复缺省目录，把directory-name设为空字符串。例如 PRAGMA temp_store_directory = ‘’.若directory-name未找到或不可写会引发错误。<br>临时文件的缺省目录与主机的系统有关，使用Unix/Linux/OSX系统的主机，缺省目录是如下序列之中第一个可写的 /var/tmp, /usr/tmp, /tmp,current-directory.对于Windows NT,缺省目录由Windows决定，一般为 C:\Documents and Settings\user-name\Local Settings\Temp. SQLite创建的临时文件在使用完毕时就被unlink,所以操作系统可以在SQLite进程进行中自动删除临时文件。 于是，正常情况下不能通过ls 或 dir命令看到临时文件。</p>
<h2 id="用于查询数据库的schema的pragma"><a href="#用于查询数据库的schema的pragma" class="headerlink" title="用于查询数据库的schema的pragma"></a>用于查询数据库的schema的pragma</h2><h3 id="PRAGMA-database-list"><a href="#PRAGMA-database-list" class="headerlink" title="PRAGMA database_list;"></a>PRAGMA database_list;</h3><p>对每个打开的数据库，使用该数据库的信息调用一次回叫函数。使用包括附加的数据库名和索引名在内的参数。第一行用于主数据库，第二行用于存放临时表的临时数据库。</p>
<h3 id="PRAGMA-foreign-key-list-table-name"><a href="#PRAGMA-foreign-key-list-table-name" class="headerlink" title="PRAGMA foreign_key_list(table-name);"></a>PRAGMA foreign_key_list(table-name);</h3><p>对于参数表中每个涉及到字段的外键，使用该外键的信息调用一次回叫函数。每个外键中的每个字段都将调用一次回叫函数。</p>
<h3 id="PRAGMA-index-info-index-name"><a href="#PRAGMA-index-info-index-name" class="headerlink" title="PRAGMA index_info(index-name);"></a>PRAGMA index_info(index-name);</h3><p>对该索引涉及到的每个字段，使用字段信息(字段名，字段号)调用一次回叫函数。</p>
<h3 id="PRAGMA-index-list-table-name"><a href="#PRAGMA-index-list-table-name" class="headerlink" title="PRAGMA index_list(table-name);"></a>PRAGMA index_list(table-name);</h3><p>对表中的每个索引，使用索引信息调用回叫函数。参数包括索引名和一个指示索引是否唯一的标志。</p>
<h3 id="PRAGMA-table-info-table-name"><a href="#PRAGMA-table-info-table-name" class="headerlink" title="PRAGMA table_info(table-name);"></a>PRAGMA table_info(table-name);</h3><p>对于表中的每个字段，使用字段信息(字段名，数据类型，可否为空，缺省值)调用回叫函数。</p>
<h2 id="用于查询-更改版本信息的pragma"><a href="#用于查询-更改版本信息的pragma" class="headerlink" title="用于查询/更改版本信息的pragma"></a>用于查询/更改版本信息的pragma</h2><h3 id="PRAGMA-database-schema-version"><a href="#PRAGMA-database-schema-version" class="headerlink" title="PRAGMA [database.]schema_version;"></a>PRAGMA [database.]schema_version;</h3><p>PRAGMA [database.]schema_version = integer ;<br>PRAGMA [database.]user_version;<br>PRAGMA [database.]user_version = integer ;<br>这两条pragma分别用于设置schema-version和user-version的值。schema-version 和user-version均为32位有符号整数，存放于数据库头中。<br>schema-version通常只由SQLite内部操作。每当数据库的schema改变时(创建或撤消表或索引)，SQLite 将这个值增大。schema版本在每一次query被执行时被SQLite所使用，以确定编译SQL query时内部cache的schema与编译后的query实际执行时数据库的schema相匹配。使用”PRAGMA schema_version”更改schema-version会破坏这一机制，有导致程序崩溃或数据库损坏的潜在危险。请小心使用！<br>user-version不在SQLite内部使用，任何程序可以用它来做任何事。</p>
<h2 id="用于库debug的pragma"><a href="#用于库debug的pragma" class="headerlink" title="用于库debug的pragma"></a>用于库debug的pragma</h2><h3 id="PRAGMA-integrity-check"><a href="#PRAGMA-integrity-check" class="headerlink" title="PRAGMA integrity_check;"></a>PRAGMA integrity_check;</h3><p>该命令对整个数据库进行完整性检查，查找次序颠倒的记录，丢失的页，残缺的记录以及损坏的索引。若发现任何问题则返回一形容问题所在的字符串，若一切正常返回”ok”.</p>
<h3 id="PRAGMA-parser-trace-ON-1-amp-amp-PRAGMA-parser-trace-OFF-0"><a href="#PRAGMA-parser-trace-ON-1-amp-amp-PRAGMA-parser-trace-OFF-0" class="headerlink" title="PRAGMA parser_trace = ON; (1) &amp;&amp; PRAGMA parser_trace = OFF; (0)"></a>PRAGMA parser_trace = ON; (1) &amp;&amp; PRAGMA parser_trace = OFF; (0)</h3><p>打开或关闭SQLite库中的SQL语法分析追踪，用于debug.只有当SQLite不使用NDEBUG宏进行编译时该pragma才可用。</p>
<h3 id="PRAGMA-vdbe-trace-ON-1-amp-amp-PRAGMA-vdbe-trace-OFF-0"><a href="#PRAGMA-vdbe-trace-ON-1-amp-amp-PRAGMA-vdbe-trace-OFF-0" class="headerlink" title="PRAGMA vdbe_trace = ON; (1) &amp;&amp; PRAGMA vdbe_trace = OFF; (0)"></a>PRAGMA vdbe_trace = ON; (1) &amp;&amp; PRAGMA vdbe_trace = OFF; (0)</h3><p>打开或关闭SQLite库中的虚拟数据库引擎追踪，用于debug.更多信息，察看 VDBE文档。</p>
<h3 id="PRAGMA-vdbe-listing-ON-1-amp-amp-PRAGMA-vdbe-listing-OFF-0"><a href="#PRAGMA-vdbe-listing-ON-1-amp-amp-PRAGMA-vdbe-listing-OFF-0" class="headerlink" title="PRAGMA vdbe_listing = ON; (1) &amp;&amp; PRAGMA vdbe_listing = OFF; (0)"></a>PRAGMA vdbe_listing = ON; (1) &amp;&amp; PRAGMA vdbe_listing = OFF; (0)</h3><p>打开或关闭虚拟机程序列表，当开启列表功能，整个程序的内容在执行前被打印出来，就像在每条语句之前自动执行EXPLAIN. 语句在打印列表之后正常执行。用于debug.更多信息，查看VDBE文档。</p>
</div>

            
<nav class="post-nav flex-row">
  <div class="flex-col waves-block prev">
    
      <a href="/2012/09/21/segmentation-fault/" title="segmentation-fault" id="post-prev" class="post-nav-link">
        <i class="icon icon-chevron-left"></i>
        <span class="article-nav-title">上一篇</span>
      </a>
    
  </div>
  <div class="flex-col waves-block next">
    
      <a href="/2012/09/09/SQLite临时文件及其编译参数/" title="SQLite临时文件及其编译参数" id="post-next" class="post-nav-link">
        <span class="article-nav-title">下一篇</span>
        <i class="icon icon-chevron-right"></i>
      </a>
    
  </div>

</nav>



            
<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="SQLite编译指令PRAGMA" data-title="SQLite编译指令PRAGMA" data-url="https://hayukleung.github.io/2012/09/09/SQLite编译指令PRAGMA/index.html"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"hayukleung"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>






        </div>

      </div>

    

  </article>



    </div>
  </main>
<div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-circle-light"><span class="icon icon-lg icon-chevron-up"></span></a>

<div class="global-share" id="global-share" data-title="SQLite编译指令PRAGMA" data-pic="/img/avatar.png" data-summary="梁夏旭的个人博客" data-url="https://hayukleung.github.io/2012/09/09/SQLite编译指令PRAGMA/index.html">
    <div class="tit">分享到：</div>
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" href="javascript:;" data-title="微博" data-service="tsina">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns" href="javascript:;" data-title="微信" data-service="weixin">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" href="javascript:;" data-title=" QQ" data-service="cqq">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" href="javascript:;" data-title=" Facebook" data-service="fb">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" href="javascript:;" data-title=" Twitter" data-service="twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="douban share-sns" href="javascript:;" data-title="豆瓣" data-service="douban">
          豆
        </a>
      </li>
    </ul>
 </div>


<script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<script src="/js/main.js"></script>








</body>
</html>
